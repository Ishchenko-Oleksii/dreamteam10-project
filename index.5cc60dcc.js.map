{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-b134f8065a0ca2ff.js","src/index.js","src/js/fetchById.js","src/js/modalBook.js","node_modules/@parcel/runtime-js/lib/runtime-86ff2cc3d316ea54.js","node_modules/@parcel/runtime-js/lib/runtime-20f0c6242a6eccb6.js","node_modules/@parcel/runtime-js/lib/runtime-5521cd5fbd4a95f7.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"EVgbq\\\":\\\"index.5cc60dcc.js\\\",\\\"dcx8L\\\":\\\"bookshop.a185b304.svg\\\",\\\"kFWPh\\\":\\\"ibooks.9bcaf007.svg\\\",\\\"aN4Su\\\":\\\"amazon.0dffd886.svg\\\",\\\"jZL8r\\\":\\\"shoping-list.eb01c662.js\\\"}\"));","import './js/log-in';\nimport './js/header';\nimport './js/sitebar';\nimport './js/home';\nimport './js/supportUkraine';\nimport './js/slider';\nimport './js/fetchById';\nimport './js/modalBook';\n","const BASE_URL='https://books-backend.p.goit.global/books/';\n\nasync function fetchBookById(idBook){\n    return await fetch(`${BASE_URL}/${idBook}`)\n    .then((resp) => {\n        if (!resp.ok) {\n          throw new Error(resp.statusText);\n        } \n        return resp.json();\n      });\n}\n\nexport default {fetchBookById};","import API from './fetchById';\n\nimport imageBookShop from '../images/bookshop.svg';\nimport imageIBooks from '../images/ibooks.svg';\nimport sprite from '../images/amazon.svg';\n\nconst refs={\n    div: document.querySelector('.bookShell'),\n   \n    closeModalBtn: document.querySelector('[data-action=\"close-modal\"]'),\n    backdrop: document.querySelector('.js-backdrop'),\n    bookCard: document.querySelector('.js-book-card'),\n    shoppingListBtn: document.querySelector('[data-action=\"shopping-list-modal\"]'),\n    text: document.querySelector('.js-modal-text'),\n}\n\nconst STORAGE_KEY = 'info-shopping-list';\n\nlet currentBookInfo={};\n\nconst savedData=localStorage.getItem(STORAGE_KEY);\n\nlet arrShoppingList=JSON.parse(savedData) || [];\n\nrefs.div.addEventListener('click',onItemGalleryBooksClick);\n\nrefs.closeModalBtn.addEventListener('click', onCloseModal);\nrefs.backdrop.addEventListener('click', onBackdropClick);\nrefs.shoppingListBtn.addEventListener('click', onShoppingListBtnClick);\n\nfunction onItemGalleryBooksClick(event){\n    event.preventDefault();\n\n    const isDivQuickViewEl=event.target.classList.contains('quick-view');\n    const isImageGalleryEl=event.target.classList.contains('js-gallery-image');\n \n    if(!isImageGalleryEl && !isDivQuickViewEl){\n        return;\n    }\n\n    const idBook=event.target.dataset.id;\n    \n    const isBookInShoppingList=arrShoppingList.length===0\n    ?false\n    :arrShoppingList.find(book=>book.bookId===idBook);\n    \n    if(isBookInShoppingList){\n      refs.shoppingListBtn.textContent='remove from the shopping list';\n      refs.shoppingListBtn.classList.add('modal__button-shopping-list--remove');\n      refs.text.classList.remove('visually-hidden');\n    }\n    else{\n      refs.shoppingListBtn.textContent='add to shopping list';\n      refs.text.classList.add('visually-hidden');\n      refs.shoppingListBtn.classList.remove('modal__button-shopping-list--remove');\n    }\n    refs.bookCard.innerHTML='';\n\n    API.fetchBookById(idBook)\n    .then(createMarkupBookModal)\n    .catch(err=>console.err('Ooops! Something went wrong!'));\n\n    onOpenModal();\n       \n}\n\nfunction onOpenModal() {\n    window.addEventListener('keydown', onEscKeyPress);\n    document.body.classList.add('js-show-modal');\n\n}\n  \nfunction onCloseModal() {\n    window.removeEventListener('keydown', onEscKeyPress);\n    document.body.classList.remove('js-show-modal');\n}\n\nfunction onBackdropClick(event) {\n    if (event.currentTarget === event.target) {\n        onCloseModal();\n    }\n}\n\nfunction onEscKeyPress(event) {\n    const ESC_KEY_CODE = 'Escape';\n    const isEscKey = event.code === ESC_KEY_CODE;\n    if (isEscKey) {\n        onCloseModal();\n    }\n}\n\n\nfunction createMarkupBookModal(arrayInfoBook){\n    const {book_image, author, title, description,buy_links, _id, list_name}=arrayInfoBook;\n\n    currentBookInfo.bookId=_id;\n    currentBookInfo.bookAuthor=author;\n    currentBookInfo.bookTitle=title;\n    currentBookInfo.bookDescription=description;\n    currentBookInfo.bookCategory=list_name;\n    currentBookInfo.bookImage=book_image;\n    currentBookInfo.bookAmazon=buy_links[0].url;\n    currentBookInfo.bookOpenBook=buy_links[1].url;\n    currentBookInfo.bookShop=buy_links[4].url;\n\n    const markup=\n    `<img class=\"book-image\"\" src=\"${book_image}\" alt=\"${title}\" loading=\"lazy\" data-id=\"${_id}\"/>\n    <div class=\"book-description-thumb\">\n    <p class=\"book-title\">${title}</p>\n    <p class=\"book-author\">${author}</p>\n    <p class=\"book-description\">${description}</p>\n    <div class=\"book-links\">\n    <a class=\"book-buy-url\" href=\"${buy_links[0].url}\" target=\"_blank\" rel=\"noreferrer noopener\">\n    <svg class=\"book-buy-icon\" width=\"62\" height=\"19\">\n    <use href=\"${sprite}#svg1936\"></use>\n    </svg>\n    </a>\n    <a class=\"book-buy-url\" href=\"${buy_links[1].url}\" target=\"_blank\" rel=\"noreferrer noopener\">\n    <img src=\"${imageIBooks}\" width=\"33px\" height=\"32px\"/>\n    </a>\n    <a class=\"book-buy-url\" href=\"${buy_links[4].url}\" target=\"_blank\" rel=\"noreferrer noopener\">\n    <img src=\"${imageBookShop}\" width=\"38px\" height=\"36px\"/>\n    </a>\n    </div>\n    </div>`;\n    \n    refs.bookCard.innerHTML=markup;\n}\n\n\nfunction onShoppingListBtnClick(event){  \n    try{\n        const indexBook=arrShoppingList.findIndex(book=>book.bookId===currentBookInfo.bookId);\n\n        if(indexBook!==-1){\n            arrShoppingList.splice(indexBook,1);\n            localStorage.removeItem(STORAGE_KEY);\n            localStorage.setItem(STORAGE_KEY, JSON.stringify(arrShoppingList));\n        }\n        else{\n            arrShoppingList.push({...currentBookInfo});\n            localStorage.setItem(STORAGE_KEY, JSON.stringify(arrShoppingList));\n        }   \n    }\n    catch{\n        console.err('Ooops! Something went wrong!');\n    }\n    onCloseModal();\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"dcx8L\");","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"kFWPh\");","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"aN4Su\");"],"names":["parcelRequire","register","JSON","parse","$bpxeT","$7aab3f81c383f427$var$BASE_URL","$7aab3f81c383f427$var$_fetchBookById","$parcel$interopDefault","$2TvXO","mark","_callee","idBook","fetch","concat","then","resp","ok","Error","statusText","json","apply","this","arguments","$7aab3f81c383f427$export$2e2bcd8739ae039","fetchBookById","$dDDEV","$426f943235ede2f5$exports","getBundleURL","resolve","$5882730c1c0c2e0b$exports","$bfeaed4de4a7cdf7$exports","$6b26d2ad788ca7c0$var$refs","div","document","querySelector","closeModalBtn","backdrop","bookCard","shoppingListBtn","text","$6b26d2ad788ca7c0$var$STORAGE_KEY","$6b26d2ad788ca7c0$var$currentBookInfo","$6b26d2ad788ca7c0$var$savedData","localStorage","getItem","$6b26d2ad788ca7c0$var$arrShoppingList","$6b26d2ad788ca7c0$var$onCloseModal","window","removeEventListener","$6b26d2ad788ca7c0$var$onEscKeyPress","body","classList","remove","event","code","$6b26d2ad788ca7c0$var$createMarkupBookModal","arrayInfoBook","book_image","author","title","description","buy_links","_id","list_name","bookId","bookAuthor","bookTitle","bookDescription","bookCategory","bookImage","bookAmazon","url","bookOpenBook","bookShop","markup","innerHTML","addEventListener","preventDefault","isDivQuickViewEl","target","contains","dataset","id","length","find","book","textContent","add","catch","err","console","currentTarget","indexBook","findIndex","splice","removeItem","setItem","stringify","push","e"],"version":3,"file":"index.5cc60dcc.js.map"}