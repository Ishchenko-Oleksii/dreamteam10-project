!function(){function e(e){return e&&e.__esModule?e.default:e}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},r=o.parcelRequired7c6;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,o.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,o){n[e]=o},o.parcelRequired7c6=r),r("iE7OH").register(JSON.parse('{"EVgbq":"index.4c0c6105.js","dcx8L":"bookshop.a185b304.svg","kFWPh":"ibooks.9bcaf007.svg","aN4Su":"amazon.0dffd886.svg","jZL8r":"shoping-list.a45bcf67.js"}')),r("4uJ2G"),r("i8Q71"),r("fveBt"),r("6N62V"),r("2Y3SG"),r("8Veln");var a=r("bpxeT"),s=r("2TvXO"),i="https://books-backend.p.goit.global/books/";function c(){return(c=e(a)(e(s).mark((function o(t){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(i,"/").concat(t)).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),o)})))).apply(this,arguments)}var l,d={fetchBookById:function(e){return c.apply(this,arguments)}},u=r("dDDEV");l=r("aNJCr").getBundleURL("EVgbq")+r("iE7OH").resolve("dcx8L");var p;p=r("aNJCr").getBundleURL("EVgbq")+r("iE7OH").resolve("kFWPh");var g;g=r("aNJCr").getBundleURL("EVgbq")+r("iE7OH").resolve("aN4Su");var b={div:document.querySelector(".bookShell"),closeModalBtn:document.querySelector('[data-action="close-modal"]'),backdrop:document.querySelector(".js-backdrop"),bookCard:document.querySelector(".js-book-card"),shoppingListBtn:document.querySelector('[data-action="shopping-list-modal"]'),text:document.querySelector(".js-modal-text")},h="info-shopping-list",f={},k=[];function v(){window.removeEventListener("keydown",m),document.body.classList.remove("js-show-modal")}function m(e){"Escape"===e.code&&v()}function y(o){var t=o.book_image,n=o.author,r=o.title,a=o.description,s=o.buy_links,i=o._id,c=o.list_name;f.bookId=i,f.bookAuthor=n,f.bookTitle=r,f.bookDescription=a,f.bookCategory=c,f.bookImage=t,f.bookAmazon=s[0].url,f.bookOpenBook=s[1].url,f.bookShop=s[4].url;var d='<img class="book-image"" src="'.concat(t,'" alt="').concat(r,'" loading="lazy" data-id="').concat(i,'"/>\n    <div class="book-description-thumb">\n    <p class="book-title">').concat(r,'</p>\n    <p class="book-author">').concat(n,'</p>\n    <p class="book-description">').concat(a,'</p>\n    <div class="book-links">\n    <a class="book-buy-url" href="').concat(s[0].url,'" target="_blank" rel="noreferrer noopener">\n    <svg class="book-buy-icon" width="62" height="19">\n    <use href="').concat(e(g),'#svg1936"></use>\n    </svg>\n    </a>\n    <a class="book-buy-url" href="').concat(s[1].url,'" target="_blank" rel="noreferrer noopener">\n    <img src="').concat(e(p),'" width="33px" height="32px"/>\n    </a>\n    <a class="book-buy-url" href="').concat(s[4].url,'" target="_blank" rel="noreferrer noopener">\n    <img src="').concat(e(l),'" width="38px" height="36px"/>\n    </a>\n    </div>\n    </div>');b.bookCard.innerHTML=d}localStorage.getItem(h)&&(k=JSON.parse(localStorage.getItem(h))),b.div.addEventListener("click",(function(e){e.preventDefault();var o=e.target.classList.contains("quick-view");if(!e.target.classList.contains("js-gallery-image")&&!o)return;var t=e.target.dataset.id;0!==k.length&&k.find((function(e){return e.bookId===t}))?(b.shoppingListBtn.textContent="remove from the shopping list",b.shoppingListBtn.classList.add("modal__button-shopping-list--remove"),b.text.classList.remove("visually-hidden")):(b.shoppingListBtn.textContent="add to shopping list",b.text.classList.add("visually-hidden"),b.shoppingListBtn.classList.remove("modal__button-shopping-list--remove"));b.bookCard.innerHTML="",d.fetchBookById(t).then(y).catch((function(e){return console.err("Ooops! Something went wrong!")})),window.addEventListener("keydown",m),document.body.classList.add("js-show-modal")})),b.closeModalBtn.addEventListener("click",v),b.backdrop.addEventListener("click",(function(e){e.currentTarget===e.target&&v()})),b.shoppingListBtn.addEventListener("click",(function(o){try{var t=k.findIndex((function(e){return e.bookId===f.bookId}));-1!==t?(k.splice(t,1),localStorage.removeItem(h),localStorage.setItem(h,JSON.stringify(k))):(k.push(e(u)({},f)),localStorage.setItem(h,JSON.stringify(k)))}catch(e){console.err("Ooops! Something went wrong!")}v()}))}();
//# sourceMappingURL=index.4c0c6105.js.map
